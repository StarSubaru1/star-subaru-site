<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Star Subaru Delivers</title>
  <link rel="stylesheet" href="styles.css" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&family=Open+Sans:wght@400;700;800&display=swap" rel="stylesheet">
</head>
<body>
  <div class="page-wrapper">

    <!-- Hero, Cards, GM Section, etc. (unchanged) -->
    <!-- ...snipped for brevity in this preview... -->

    <!-- Section 5: Staff Cards -->
    <section class="staff-section">
        <h2 style="text-align: center; margin-bottom: 0;">MEET OUR STAFF</h2>
        <h3 style="text-align: center; margin-top: 0;">AND BOOK A VIRTUAL CONSULTATION</h3>
        <div id="staff-container" class="staff-container"></div>
    </section>

    <!-- Appointment Modal -->
    <div id="appointment-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2 style="text-align: center;">REQUEST AN APPOINTMENT</h2>
            <form action="https://formsubmit.co/thomasjstuart@gmail.com" method="POST">
                <input type="hidden" name="_subject" id="form-subject" />
                <input type="hidden" name="employee" id="form-employee" />
                <input type="hidden" name="_autoresponse" value="Thank you for reaching out to Star Subaru! Your appointment request was sent to the dealership, and we’ll be in touch shortly to confirm. If you need anything in the meantime, visit us at https://www.starsubaru.com, call (718)819-0100 or stop by 206-26 Northern Blvd, Bayside, NY 11361. It’s great to meet you – we look forward to helping you get into a new Subaru or quality preowned car!" />

                <label>Your Name</label><br/>
                <input type="text" name="name" required autofocus><br/><br/>

                <label>Your Email</label><br/>
                <input type="email" name="email" required><br/><br/>

                <label>Phone Number (optional)</label><br/>
                <input type="tel" name="phone"><br/><br/>

                <label>ZIP Code (optional)</label><br/>
                <input type="text" name="zip"><br/><br/>

                <label>Preferred Date/Time</label><br/>
                <input type="datetime-local" name="datetime"><br/><br/>

                <button type="submit" class="btn blue">Submit Request</button>
            </form>
        </div>
    </div>

  </div>

  <!-- Script to load staff cards and bind modal events -->
  <script>
    fetch('staff.json')
      .then(res => res.json())
      .then(data => {
        const container = document.getElementById('staff-container');
        data.forEach(member => {
          const card = document.createElement('div');
          card.className = 'staff-card';
          card.innerHTML = `
            <img src="${member.image}" alt="${member.name}" style="width: 100%; height: 220px; object-fit: cover; border-radius: 8px; margin-bottom: 10px;" />
            <h3>${member.name}</h3>
            <p>${member.languages.join(', ')}</p>
            <p><strong>Day Off:</strong> ${member.daysOff}</p>
            <a class="btn-primary book-now" href="#" data-name="${member.name}">Book Now</a>
          `;
          container.appendChild(card);
        });

        // Attach modal logic AFTER buttons exist
        const modal = document.getElementById("appointment-modal");
        const closeBtn = document.querySelector(".close-button");

        document.querySelectorAll(".book-now").forEach(button => {
          button.addEventListener("click", (e) => {
            e.preventDefault();
            const staffName = button.getAttribute("data-name");
            document.getElementById("form-employee").value = staffName;
            document.getElementById("form-subject").value = `Appointment request for ${staffName}`;
            modal.style.display = "flex";
          });
        });

        closeBtn.addEventListener("click", () => {
          modal.style.display = "none";
        });

        window.addEventListener("click", (e) => {
          if (e.target === modal) {
            modal.style.display = "none";
          }
        });
      });
  </script>
</body>
</html>